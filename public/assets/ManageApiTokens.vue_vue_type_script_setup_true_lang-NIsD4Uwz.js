import{d as y,a as u,o as i,q as w,u as e,z as P,x as U,C as R,f as b,D as W,e as s,w as t,k as r,b as p,y as C,F as $,r as V,l as N,t as T,T as X,s as H}from"./app-C76h3lJp.js";import{c as Z,b as A,_ as v}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CKg_ptW0.js";import{_ as O}from"./Checkbox.vue_vue_type_script_setup_true_lang-BhBNm1qP.js";import{_ as E,a as F,b as M,c as j,d as L,e as z,f as q}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BC-QT-DQ.js";import{_ as h,a as ee}from"./Label.vue_vue_type_script_setup_true_lang-O1Vk9J4U.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=Z("CopyIcon",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Y=y({__name:"Card",props:{class:{}},setup(c){const d=c;return(n,f)=>(i(),u("div",{"data-slot":"card",class:w(e(A)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",d.class))},[P(n.$slots,"default")],2))}}),G=y({__name:"CardContent",props:{class:{}},setup(c){const d=c;return(n,f)=>(i(),u("div",{"data-slot":"card-content",class:w(e(A)("px-6",d.class))},[P(n.$slots,"default")],2))}}),J=y({__name:"CardDescription",props:{class:{}},setup(c){const d=c;return(n,f)=>(i(),u("p",{"data-slot":"card-description",class:w(e(A)("text-muted-foreground text-sm",d.class))},[P(n.$slots,"default")],2))}}),K=y({__name:"CardHeader",props:{class:{}},setup(c){const d=c;return(n,f)=>(i(),u("div",{"data-slot":"card-header",class:w(e(A)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",d.class))},[P(n.$slots,"default")],2))}}),Q=y({__name:"CardTitle",props:{class:{}},setup(c){const d=c;return(n,f)=>(i(),u("h3",{"data-slot":"card-title",class:w(e(A)("leading-none font-semibold",d.class))},[P(n.$slots,"default")],2))}}),te={key:0,class:"col-span-6"},ae={class:"grid grid-cols-1 gap-4 mt-2 md:grid-cols-2"},le={key:0,class:"flex justify-between items-center px-4 py-2 mt-4 font-mono text-sm text-gray-500 break-all bg-gray-100 rounded border border-gray-200 dark:border-gray-400 dark:bg-background dark:text-gray-400"},oe={key:0,class:"flex justify-end mt-2 mr-2 text-xs text-gray-600 dark:text-gray-400"},ye=y({__name:"CreateApiTokenForm",props:{availablePermissions:{},defaultPermissions:{}},setup(c){const n=U({name:"",permissions:c.defaultPermissions}),f=R(),m=b(!1),g=b(!1),_=()=>{n.post(route("api-tokens.store"),{preserveScroll:!0,onSuccess:()=>{I(),n.reset()}})},I=()=>{m.value=!0},S=()=>{m.value=!1},D=()=>{g.value=!0,navigator.clipboard.writeText(f.props.flash.api_token),setTimeout(()=>{g.value=!1},2e3)};return(k,o)=>{const a=W("InputError");return i(),u($,null,[s(e(Y),{class:"w-full"},{default:t(()=>[s(e(K),null,{default:t(()=>[s(e(Q),null,{default:t(()=>o[2]||(o[2]=[r("Create API Token")])),_:1})]),_:1}),s(e(G),null,{default:t(()=>[s(e(J),null,{default:t(()=>o[3]||(o[3]=[r("API tokens allow third-party services to authenticate with our application on your behalf.")])),_:1}),p("form",{onSubmit:N(_,["prevent"]),class:"mt-6 space-y-6"},[p("div",null,[s(e(h),{for:"name",value:"Name"}),s(e(ee),{id:"name",type:"text",required:"",autofocus:"",tabindex:1,autocomplete:"name",modelValue:e(n).name,"onUpdate:modelValue":o[0]||(o[0]=l=>e(n).name=l),placeholder:"API Token Name"},null,8,["modelValue"]),s(a,{message:e(n).errors.name},null,8,["message"])]),p("div",null,[k.availablePermissions.length>0?(i(),u("div",te,[s(e(h),{for:"permissions",value:"Permissions"}),p("div",ae,[(i(!0),u($,null,V(k.availablePermissions,l=>(i(),u("div",{key:l},[s(e(h),{for:l,class:"flex items-center space-x-3"},{default:t(()=>[s(e(O),{id:l,checked:e(n).permissions.includes(l),"onUpdate:checked":x=>{x?e(n).permissions.push(l):e(n).permissions=e(n).permissions.filter(B=>B!==l)},tabindex:4},null,8,["id","checked","onUpdate:checked"]),p("span",null,T(l),1)]),_:2},1032,["for"])]))),128))])])):C("",!0)]),s(e(v),{type:"submit",class:"mt-4",tabindex:4,disabled:e(n).processing},{default:t(()=>o[4]||(o[4]=[r(" Create ")])),_:1},8,["disabled"])],32)]),_:1})]),_:1}),s(e(q),{open:m.value,"onUpdate:open":o[1]||(o[1]=l=>m.value=l)},{default:t(()=>[s(e(E),{class:"max-w-xl"},{default:t(()=>[s(e(F),{class:"space-y-3"},{default:t(()=>[s(e(M),null,{default:t(()=>o[5]||(o[5]=[r("API Token")])),_:1}),s(e(j),null,{default:t(()=>o[6]||(o[6]=[r(" Please copy your new API token. For your security, it won't be shown again. ")])),_:1})]),_:1}),k.$page.props.flash.api_token?(i(),u("div",le,[r(T(k.$page.props.flash.api_token)+" ",1),p("button",{onClick:D,type:"button",class:"flex items-center px-3 py-1 text-xs bg-gray-300 rounded cursor-pointer hover:opacity-75"},[s(e(se),{class:"w-4 h-4"})])])):C("",!0),s(X,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:t(()=>[g.value?(i(),u("p",oe," Copied to clipboard! ")):C("",!0)]),_:1}),s(e(L),null,{default:t(()=>[s(e(z),{"as-child":""},{default:t(()=>[s(e(v),{variant:"secondary",onClick:S},{default:t(()=>o[7]||(o[7]=[r(" Close ")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])],64)}}}),ne={class:"mt-6 space-y-6"},re={class:"break-all"},ie={class:"flex gap-4 items-center ms-2"},de={class:"text-sm text-gray-400"},ue={class:"mt-4 text-sm"},pe={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},ce={class:"text-sm ms-2"},ge=y({__name:"ManageApiTokens",props:{tokens:{},availablePermissions:{},defaultPermissions:{}},setup(c){const d=b(!1),n=b(null),f=b(!1),m=b(null),g=U({}),_=U({permissions:[]}),I=o=>{d.value=!0,_.permissions=o.abilities,n.value=o},S=()=>{n.value&&_.put(route("api-tokens.update",{token:n.value}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>(n.value=null,d.value=!1)})},D=o=>{f.value=!0,m.value=o},k=()=>{m.value&&g.delete(route("api-tokens.destroy",{token:m.value}),{preserveScroll:!0,preserveState:!0,onSuccess:()=>(m.value=null,f.value=!1)})};return(o,a)=>(i(),u($,null,[o.tokens.length>0?(i(),H(e(Y),{key:0,class:"w-full"},{default:t(()=>[s(e(K),null,{default:t(()=>[s(e(Q),null,{default:t(()=>a[4]||(a[4]=[r("Manage API Tokens")])),_:1})]),_:1}),s(e(G),null,{default:t(()=>[s(e(J),null,{default:t(()=>a[5]||(a[5]=[r("You may delete any of your existing tokens if they are no longer needed.")])),_:1}),p("div",ne,[(i(!0),u($,null,V(o.tokens,l=>(i(),u("div",{key:l.id,class:"flex justify-between items-center"},[p("div",re,T(l.name),1),p("div",ie,[p("div",de," Last used | "+T(l.last_used_at?new Date(l.last_used_at).toLocaleString():"Never"),1),o.availablePermissions.length>0?(i(),H(e(v),{key:0,onClick:x=>I(l)},{default:t(()=>a[6]||(a[6]=[r(" Edit ")])),_:2},1032,["onClick"])):C("",!0),s(e(v),{variant:"destructive",onClick:x=>D(l)},{default:t(()=>a[7]||(a[7]=[r("Delete")])),_:2},1032,["onClick"])])]))),128))])]),_:1})]),_:1})):C("",!0),s(e(q),{open:d.value,"onUpdate:open":a[1]||(a[1]=l=>d.value=l)},{default:t(()=>[s(e(E),{class:"max-w-xl"},{default:t(()=>[s(e(F),{class:"space-y-3"},{default:t(()=>[s(e(M),null,{default:t(()=>a[8]||(a[8]=[r("API Token Permissions")])),_:1}),s(e(j),null,{default:t(()=>a[9]||(a[9]=[r("Manage the permissions for this API token.")])),_:1})]),_:1}),p("div",ue,[p("div",pe,[(i(!0),u($,null,V(o.availablePermissions,l=>(i(),u("div",{key:l},[s(e(h),{class:"flex items-center"},{default:t(()=>[s(e(O),{id:l,checked:e(_).permissions.includes(l),"onUpdate:checked":x=>{x?e(_).permissions.push(l):e(_).permissions=e(_).permissions.filter(B=>B!==l)},tabindex:4},null,8,["id","checked","onUpdate:checked"]),p("span",ce,T(l),1)]),_:2},1024)]))),128))])]),s(e(L),null,{default:t(()=>[s(e(z),{"as-child":""},{default:t(()=>[s(e(v),{variant:"secondary",onClick:a[0]||(a[0]=l=>d.value=!1)},{default:t(()=>a[10]||(a[10]=[r(" Close ")])),_:1})]),_:1}),p("form",{onSubmit:N(S,["prevent"])},[s(e(v),{type:"submit",class:"ms-3",disabled:e(_).processing,onClick:S},{default:t(()=>a[11]||(a[11]=[r(" Save ")])),_:1},8,["disabled"])],32)]),_:1})]),_:1})]),_:1},8,["open"]),s(e(q),{open:f.value,"onUpdate:open":a[3]||(a[3]=l=>f.value=l)},{default:t(()=>[s(e(E),{class:"max-w-xl"},{default:t(()=>[s(e(F),{class:"space-y-3"},{default:t(()=>[s(e(M),null,{default:t(()=>a[12]||(a[12]=[r("Delete API Token")])),_:1}),s(e(j),null,{default:t(()=>a[13]||(a[13]=[r("Are you sure you would like to delete this API token?")])),_:1})]),_:1}),s(e(L),null,{default:t(()=>[s(e(z),{"as-child":""},{default:t(()=>[s(e(v),{variant:"secondary",onClick:a[2]||(a[2]=l=>m.value=null)},{default:t(()=>a[14]||(a[14]=[r("Close")])),_:1})]),_:1}),p("form",{onSubmit:N(k,["prevent"])},[s(e(v),{variant:"destructive",type:"submit",class:"ms-3",disabled:e(g).processing,onClick:k},{default:t(()=>a[15]||(a[15]=[r(" Delete ")])),_:1},8,["disabled"])],32)]),_:1})]),_:1})]),_:1},8,["open"])],64))}});export{ye as _,ge as a};
